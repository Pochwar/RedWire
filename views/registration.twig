{% extends "layout/layout.twig" %}

{% block content %}
    <div class="container-fluid">
        <div class="row ct-bg-grey">
            <div class="col-md-offset-2 col-md-6">
                <h2 class="ct-txt-yellow" >
                    {{ __("REGISTRATION") }}
                </h2>
                <div id="error" class="list-group-item list-group-item-danger">
                {{ error }}
                </div>
                <div id="success" class="list-group-item list-group-item-success">
                {{ msg }}
                </div>
                <div class="ct-txt-white">(*) {{ __("REQUIREDFIELDS") }}</p>
                    <form action="" id="registrationForm" method="post">
                        <div class="form-group">
                            <label class="ct-txt-white" for="firstname">{{ __("FIRSTNAME") }} * : </label>
                            <input type="text" name="firstname" class="form-control" id="firstname" placeholder="{{ __("ALPHANUM_FORMAT") }}" minlength="3" maxlength="20" pattern="\w{3,20}" required>
                        </div>
                        <div class="form-group">
                            <label class="ct-txt-white" for="lastname">{{ __("LASTNAME") }} * : </label>
                            <input type="text" name="lastname" class="form-control" id="lastname" placeholder="{{ __("ALPHANUM_FORMAT") }}" minlength="3" maxlength="20" pattern="\w{3,20}" required>
                        </div>
                        <div class="form-group">
                            <label class="ct-txt-white" for="pseudo">{{ __("PSEUDO") }} * : </label>
                            <input type="text" name="pseudo" class="form-control" id="pseudo" placeholder="{{ __("ALPHANUM_FORMAT") }}" minlength="3" maxlength="20" pattern="\w{3,20}" required>
                        </div>
                        <div class="form-group">
                            <label class="ct-txt-white" for="birthday">{{ __("BDAY") }} * : </label>
                            <div class="input-group date" id="datetimepicker">
                                <input type="text" name="birthday" class="form-control" id="birthday" placeholder="{{ __("DATE_FORMAT") }}" required>
                                <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar">
                                </span>
                            </span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="ct-txt-white" for="mail">{{ __("MAIL") }} * : </label>
                            <input type="email" name="mail" class="form-control" id="mail" placeholder="{{ __("MAIL_FORMAT") }}" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" required>
                        </div>
                        <div class="form-group">
                            <label class="ct-txt-white" for="pass">{{ __("PASSWORD") }} * : </label>
                            <input type="password" name="password" class="form-control" id="password" placeholder="{{ __("ALPHANUM_FORMAT") }}" minlength="3" maxlength="20" pattern="\w{3,20}" required>
                        </div>
                        <div class="form-group">
                            <label class="ct-txt-white" for="passConf">{{ __("PASSWORD_CONF") }} * : </label>
                            <input type="password" name="passwordConf" class="form-control" id="passwordConf" placeholder="{{ __("RETYPE_PASSWORD") }}" minlength="3" maxlength="20" pattern="\w{3,20}" required>
                        </div>
                        <div id="passCheck" class="ct-txt-red" ><p>{{ __("PASSMUSTBEEQUAL") }}</p></div>
                        <div class="form-group">
                            <label class="ct-txt-white" for="langId">{{ __("LANG") }} : </label>
                            <select name="langId" class="form-control" id="langId">
                                <option value="1">{{ __("LANG_FR") }}</option>
                                <option value="2">{{ __("LANG_EN") }}</option>
                            </select>
                        </div>
                        <input href="/send" class="btn" type="submit" value="{{ __("REGISTER") }}">
                    </form>

            </div>
        </div>
    </div>
    <script type="text/javascript" src="js/passCheck.js"></script>
    <script type="text/javascript">
        //get locale
        var locale = "";
        $.ajax({
            url : '/api/user/data',
            type : 'GET',
            success: function(data) {
                if(data.locale){
                    locale = data.locale;
                    //format datepicker plugin
                    $(function () {
                        $("#datetimepicker").datetimepicker({
                            locale: locale,
                            viewMode: 'years',
                            format: "DD/MM/YYYY"
                        });
                    });
                }
            },
            error: error => {
                console.log('locale error');
            }
        });
    </script>
    <script>

    (function($){
    jQuery.fn.checkEmpty = function() {
       return !$.trim(this.html()).length;
    };
    }(jQuery));

    if($("#error").checkEmpty()){
        $('#error').hide();
    }else{
        $('#error').show();
    }

     if($("#success").checkEmpty()){
        $('#success').hide();
    }else{
        $('#success').show();
    }
    </script>
{% endblock %}